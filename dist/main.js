import{b as f,c as T,d}from"./chunk-6QOHYXOD.js";import{workspace as w}from"vscode";import{ConfigurationTarget as h,Uri as C,commands as y,window as s,workspace as i}from"vscode";var m=t=>{let{palette:e}=t,o=["// TODO","/** TODO","# TODO","<!-- TODO","// NOTE","/** NOTE","# NOTE","<!-- NOTE","// FIXME","/** FIXME","# FIXME","<!-- FIXME","// IMPORTANT","/** IMPORTANT","# IMPORTANT","<!-- IMPORTANT"],r={TODO:["// TODO","/** TODO","# TODO","<!-- TODO"],NOTE:["// NOTE","/** NOTE","# NOTE","<!-- NOTE"],FIXME:["// FIXME","/** FIXME","# FIXME","<!-- FIXME"],IMPORTANT:["// IMPORTANT","/** IMPORTANT","# IMPORTANT","<!-- IMPORTANT"]},n={background:e.bg_1,borderRadius:"0",fontWeight:"bold",foreground:e.black,icon:"alert",iconColour:e.bright_purple_pink,type:"text"},a={TODO:{background:e.bright_aqua,icon:"info"},NOTE:{background:e.bright_purple,icon:"note"},FIXME:{background:e.red_pink,icon:"flame"},IMPORTANT:{background:e.bright_red_pink,icon:"star"}};return{"general.tags":[...o],"general.tagGroups":{...r},"highlights.defaultHighlight":{...n},"highlights.customHighlight":{...a}}};var p=t=>{let{tokenColors:e}=t;return{hintGutterIconColor:e.hintColor,infoGutterIconColor:e.infoColor,warningGutterIconColor:e.warnColor,errorGutterIconColor:e.errorColor}};var b=(t,e)=>Object.fromEntries(Object.entries(t).filter((o,r,n)=>e(o,r,n))),l=s.createOutputChannel("Gruvvy Watermelon Theme",{log:!0}),v=async(t,e)=>i.fs.writeFile(t,Buffer.alloc(5,JSON.stringify(e,void 0,2))).then(()=>{},o=>{s.showErrorMessage(o.message)}),u=async(t,e)=>{let o=async()=>{let r=d(t),n=C.file("./themes/Gruvvy-Watermelon-color-theme.json");return v(n,r)};Promise.resolve(o).then(()=>{I(e)}).catch(r=>{s.showErrorMessage(`Failed to save re-compiled theme: 
`+r.message)})};function I(t){let e=`Gruvvy Watermelon: ${t} - Reload required.`,o="Reload window";s.showInformationMessage(e,o).then(r=>{r===o&&y.executeCommand("workbench.action.reloadWindow")})}var O=async t=>{l.info("Checking if gruvvy watermelon is installed for the first time.");let e=C.file(t.asAbsolutePath("themes/.flag"));return await N(e)?(l.info("Gruvvy Watermelon has been installed before."),!1):(l.info("Catppuccin is installed for the first time!"),i.fs.writeFile(e,Buffer.from("")).then(()=>!0,()=>"error"))},N=async t=>i.fs.stat(t).then(()=>!0,()=>!1),E=()=>{let t=i.getConfiguration("gruvvy-watermelon"),e={integrateTodoTree:t.get("overrideTodoTree"),integrateErrorLensGutter:t.get("integrateErrorLensGutter")};return{...T,...b(e,([,o])=>o!==void 0)}};function c(t){let e=i.getConfiguration("gruvvy-watermelon"),o=e.get("integrateTodoTree"),r=e.get("integrateErrorLensGutter");if(t["gruvvy-watermelon.integrateErrorLensGutter"].changed){let n=m(f);for(let[a,g]of Object.entries(n))i.getConfiguration("todo-tree").update(a,o?g:void 0,h.Workspace)}if(t["gruvvy-watermelon.integrateErrorLensGutter"].changed){let n=p(f);for(let[a,g]of Object.entries(n))i.getConfiguration("errorLens").update(a,r?g:void 0,h.Workspace)}}var j=async t=>{let e=E(),o={"gruvvy-watermelon.integrateTodoTree":{changed:!1},"gruvvy-watermelon.integrateErrorLensGutter":{changed:!1}};await O(t)===!0&&(u(e,"Update detected"),c(o)),t.subscriptions.push(w.onDidChangeConfiguration(r=>{if(r.affectsConfiguration("gruvvy-watermelon")){u(e,"Configuration changed");let n=x(o,r);n.changed&&c(n.entries)}}))},x=(t,e)=>{var o={changed:!1,kvp:t};for(let r in t)e!=null&&e.affectsConfiguration(r)&&(o.kvp[r].changed=!0,o.changed=!0);return{entries:o.kvp,changed:o.changed}};export{j as activate};
