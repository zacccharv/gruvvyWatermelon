import{b as u,c as T,d as m}from"./chunk-6QOHYXOD.js";import{window as E,workspace as L}from"vscode";import{ConfigurationTarget as p,Uri as O,commands as b,window as g,workspace as i}from"vscode";var d=(o,t=!1)=>{let{palette:e}=o,r=["// TODO","/** TODO","# TODO","<!-- TODO","// NOTE","/** NOTE","# NOTE","<!-- NOTE","// FIXME","/** FIXME","# FIXME","<!-- FIXME","// IMPORTANT","/** IMPORTANT","# IMPORTANT","<!-- IMPORTANT"],n={TODO:["// TODO","/** TODO","# TODO","<!-- TODO"],NOTE:["// NOTE","/** NOTE","# NOTE","<!-- NOTE"],FIXME:["// FIXME","/** FIXME","# FIXME","<!-- FIXME"],IMPORTANT:["// IMPORTANT","/** IMPORTANT","# IMPORTANT","<!-- IMPORTANT"]},s={background:e.bg_1,borderRadius:"0",fontWeight:"bold",foreground:e.black,icon:"alert",iconColour:e.bright_purple_pink,type:"text"},y={TODO:{background:e.bright_aqua,icon:"info"},NOTE:{background:e.bright_purple,icon:"note"},FIXME:{background:e.red_pink,icon:"flame"},IMPORTANT:{background:e.bright_red_pink,icon:"star"}};return{"todo-tree.general.tags":[...r],"todo-tree.general.tagGroups":{...n},"todo-tree.highlights.defaultHighlight":{...s},"todo-tree.highlights.customHighlight":{...y}}};var h=(o,t=!1)=>{let{tokenColors:e}=o;return{"errorLens.hintGutterIconColor":e.hintColor,"errorLens.infoGutterIconColor":e.infoColor,"errorLens.warningGutterIconColor":e.warnColor,"errorLens.errorGutterIconColor":e.errorColor}};var I=(o,t)=>Object.fromEntries(Object.entries(o).filter((e,r,n)=>t(e,r,n))),c=g.createOutputChannel("Gruvvy Watermelon Theme",{log:!0}),v=async(o,t)=>i.fs.writeFile(o,Buffer.alloc(5,JSON.stringify(t,void 0,2))).then(()=>{},e=>{g.showErrorMessage(e.message)}),l=async(o,t)=>{let e=async()=>{let r=m(o),n=O.file("./themes/Gruvvy-Watermelon-color-theme.json");return v(n,r)};Promise.resolve(e).then(()=>{w(t)}).catch(r=>{g.showErrorMessage(`Failed to save re-compiled theme: 
`+r.message)})};function w(o){let t=`Gruvvy Watermelon: ${o} - Reload required.`,e="Reload window";g.showInformationMessage(t,e).then(r=>{r===e&&b.executeCommand("workbench.action.reloadWindow")})}var C=async o=>{c.info("Checking if gruvvy watermelon is installed for the first time.");let t=O.file(o.asAbsolutePath("themes/.flag"));return await N(t)?(c.info("Gruvvy Watermelon has been installed before."),!1):(c.info("Catppuccin is installed for the first time!"),i.fs.writeFile(t,Buffer.from("")).then(()=>!0,()=>"error"))},N=async o=>i.fs.stat(o).then(()=>!0,()=>!1),a=()=>{let o=i.getConfiguration("gruvvy-watermelon"),t={integrateTodoTree:o.get("overrideTodoTree"),integrateErrorLensGutter:o.get("integrateErrorLensGutter")};return{...T,...I(t,([,e])=>e!==void 0)}},M=()=>{var t;return((t=i.getConfiguration("workbench").get("colorTheme"))==null?void 0:t.toString())??""},f=()=>{let t=M().includes("Gruvvy Watermelon");if(t){let e=a(),r=d(u,e.integrateTodoTree);for(let[n,s]of Object.entries(r))i.getConfiguration("todo-tree").update(n,s,p.Workspace)}if(t){let e=a(),r=h(u,e.integrateErrorLensGutter);for(let[n,s]of Object.entries(r))i.getConfiguration("errorLens").update(n,s,p.Workspace)}};var H=async o=>{let t=a();await C(o)===!0&&l(t,"Update detected"),o.subscriptions.push(L.onDidChangeConfiguration(e=>{e.affectsConfiguration("gruvvy-watermelon")&&(l(t,"Configuration changed"),e.affectsConfiguration("gruvvy-watermelon.integrateTodoTree")&&(E.showInformationMessage("Syncing configuration for gruvvy-watermelon.integrateTodoTree"),f()),e.affectsConfiguration("gruvvy-watermelon.integrateErrorLensGutter")&&(E.showInformationMessage("Syncing configuration for gruvvy-watermelon.integrateErrorLensGutter"),f()))}))};export{H as activate};
