import{b as g,c as T,d as m}from"./chunk-6QOHYXOD.js";import{workspace as L}from"vscode";import{ConfigurationTarget as h,Uri as O,commands as y,window as l,workspace as i}from"vscode";var d=(o,t=!1)=>{let{palette:e}=o,r=["// TODO","/** TODO","# TODO","<!-- TODO","// NOTE","/** NOTE","# NOTE","<!-- NOTE","// FIXME","/** FIXME","# FIXME","<!-- FIXME","// IMPORTANT","/** IMPORTANT","# IMPORTANT","<!-- IMPORTANT"],n={TODO:["// TODO","/** TODO","# TODO","<!-- TODO"],NOTE:["// NOTE","/** NOTE","# NOTE","<!-- NOTE"],FIXME:["// FIXME","/** FIXME","# FIXME","<!-- FIXME"],IMPORTANT:["// IMPORTANT","/** IMPORTANT","# IMPORTANT","<!-- IMPORTANT"]},s={background:e.bg_1,borderRadius:"0",fontWeight:"bold",foreground:e.black,icon:"alert",iconColour:e.bright_purple_pink,type:"text"},a={TODO:{background:e.bright_aqua,icon:"info"},NOTE:{background:e.bright_purple,icon:"note"},FIXME:{background:e.red_pink,icon:"flame"},IMPORTANT:{background:e.bright_red_pink,icon:"star"}};return{"todo-tree.general.tags":[...r],"todo-tree.general.tagGroups":{...n},"todo-tree.highlights.defaultHighlight":{...s},"todo-tree.highlights.customHighlight":{...a}}};var p=(o,t=!1)=>{let{tokenColors:e}=o;return{"errorLens.hintGutterIconColor":e.hintColor,"errorLens.infoGutterIconColor":e.infoColor,"errorLens.warningGutterIconColor":e.warnColor,"errorLens.errorGutterIconColor":e.errorColor}};var b=(o,t)=>Object.fromEntries(Object.entries(o).filter((e,r,n)=>t(e,r,n))),u=l.createOutputChannel("Gruvvy Watermelon Theme",{log:!0}),I=async(o,t)=>i.fs.writeFile(o,Buffer.alloc(5,JSON.stringify(t,void 0,2))).then(()=>{},e=>{l.showErrorMessage(e.message)}),f=async(o,t)=>{let e=async()=>{let r=m(o),n=O.file("./themes/Gruvvy-Watermelon-color-theme.json");return I(n,r)};Promise.resolve(e).then(()=>{N(t)}).catch(r=>{l.showErrorMessage(`Failed to save re-compiled theme: 
`+r.message)})};function N(o){let t=`Gruvvy Watermelon: ${o} - Reload required.`,e="Reload window";l.showInformationMessage(t,e).then(r=>{r===e&&y.executeCommand("workbench.action.reloadWindow")})}var C=async o=>{u.info("Checking if gruvvy watermelon is installed for the first time.");let t=O.file(o.asAbsolutePath("themes/.flag"));return await v(t)?(u.info("Gruvvy Watermelon has been installed before."),!1):(u.info("Catppuccin is installed for the first time!"),i.fs.writeFile(t,Buffer.from("")).then(()=>!0,()=>"error"))},v=async o=>i.fs.stat(o).then(()=>!0,()=>!1),E=()=>{let o=i.getConfiguration("gruvvy-watermelon"),t={integrateTodoTree:o.get("overrideTodoTree"),integrateErrorLensGutter:o.get("integrateErrorLensGutter")};return{...T,...b(t,([,e])=>e!==void 0)}};function c(){let o=i.getConfiguration("gruvvy-watermelon"),t=o.get("integrateTodoTree"),e=o.get("integrateErrorLensGutter"),r=d(g,t);for(let[s,a]of Object.entries(r))i.getConfiguration("todo-tree").update(s.replace(/^todo-tree\./,""),t?a:void 0,h.Workspace);let n=p(g,e);for(let[s,a]of Object.entries(n))i.getConfiguration("errorLens").update(s.replace(/^errorLens\./,""),e?a:void 0,h.Workspace)}var W=async o=>{let t=E();await C(o)===!0&&(f(t,"Update detected"),c()),o.subscriptions.push(L.onDidChangeConfiguration(e=>{e.affectsConfiguration("gruvvy-watermelon")&&(f(t,"Configuration changed"),(e.affectsConfiguration("gruvvy-watermelon.integrateTodoTree")||e.affectsConfiguration("gruvvy-watermelon.integrateErrorLensGutter"))&&c())}))};export{W as activate};
